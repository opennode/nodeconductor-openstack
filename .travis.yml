language: python
python:
- '2.7'
before_install:
- sudo apt-get update -qq
- sudo apt-get install gcc libffi-dev libldap2-dev libsasl2-dev libssl-dev python-dev
install:
- pip install --upgrade -e .
- python setup.py install
script:
- python setup.py test
deploy:
  provider: pypi
  user: opennode
  distributions: "sdist bdist_wheel"
  password:
    secure: BgDyg6oomYufaFiLvDsuIMZQKlcC46BbSzMud9LMQgU91Yseq5HEGyqdjvRrjrhU+CP4FQucTam/G1CUPn8KuDG/rjMycvgviYQBkC+5ltCppSL/VILrT+ver2WhC68N8sokmg8PMb+WH1wcZMzhYrlSHVDPmoH5vAFPXX695kOVcGnc4zc3Q2T9fqF3AFBx93hEIl0j6OqWPE/1Ksf7pNIltxZh0HWcLwVIiQE3VtbFcmg+gCHuWJT8S+KOpDD0Vf3Z2iNgJY3dlnYsWJAqVDlJDMH9FLXpAX7hnflSKzNHS1kWKBwz+oeYzXMP2LSwKazswPr/14qNn8VlOxhxlBegRs+HtV03XDWvAe55Wp7RPc1CyQGEpmL+uADd3w8zpSuP5rWbD+qIYTpqxbIkKGBhvqRA53DSUlVHsvq/d10iGCVu2rBi55vkAa9VIIkZCwVR0yTDiJUFqjgdXb7i60n6m9bpyXBVBrGfnvuSu89oCm5EFBZpO+vfOcxXIfbcDegRYCwDadn8JikoUzGnN5UnkavAx5dalxhXRiulgXoPs2ciBBb+L5lamZPtz/yb4O7jIN5fZx0EnIfzP+4XxCRfyXoTCnouJxLFbFAiI0lt7t0cBEf1ygeY4dcXL8Le11HYJ1ONSN/29CK75526LyJd8HecZ6ImiXW3LZQJEEQ=
  on:
    tags: true
    repo: opennode/nodeconductor-openstack
